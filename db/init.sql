create schema programs;
create table if not exists "programs"."ProgramEntries" ("programEntryId" BIGSERIAL NOT NULL PRIMARY KEY,"submissionDate" TIMESTAMP NOT NULL,"originalName" VARCHAR NOT NULL,"program" VARCHAR NOT NULL,"loc" INTEGER NOT NULL,"frontend" VARCHAR NOT NULL,"originalVerifier" VARCHAR NOT NULL,"args" BYTEA NOT NULL,"programPrint" BYTEA NOT NULL,"parseSuccess" BOOLEAN NOT NULL,"hasPreamble" BOOLEAN NOT NULL);
create table if not exists "programs"."UserSubmissions" ("submissionId" BIGSERIAL NOT NULL PRIMARY KEY,"submissionDate" TIMESTAMP NOT NULL,"originalName" VARCHAR NOT NULL,"program" VARCHAR NOT NULL,"loc" INTEGER NOT NULL,"frontend" VARCHAR NOT NULL,"argsBlob" BYTEA NOT NULL,"originalVerifier" VARCHAR NOT NULL,"success" BOOLEAN NOT NULL,"runtime" BIGINT NOT NULL);
create table if not exists "programs"."SiliconResults" ("silResId" BIGSERIAL NOT NULL PRIMARY KEY,"creationDate" TIMESTAMP NOT NULL,"siliconHash" VARCHAR NOT NULL,"programEntryId" BIGINT NOT NULL,"success" BOOLEAN NOT NULL,"runtime" BIGINT NOT NULL,"errors" BYTEA NOT NULL,"phaseRuntimes" BYTEA NOT NULL,"benchmarkResults" BYTEA NOT NULL);
create table if not exists "programs"."CarbonResults" ("carbResId" BIGSERIAL NOT NULL PRIMARY KEY,"creationDate" TIMESTAMP NOT NULL,"carbonHash" VARCHAR NOT NULL,"programEntryId" BIGINT NOT NULL,"success" BOOLEAN NOT NULL,"runtime" BIGINT NOT NULL,"errors" BYTEA NOT NULL,"phaseRuntimes" BYTEA NOT NULL);
alter table "programs"."SiliconResults" drop constraint if exists "silPE_FK";
alter table "programs"."SiliconResults" add constraint "silPE_FK" foreign key("programEntryId") references "programs"."ProgramEntries"("programEntryId") on update NO ACTION on delete NO ACTION;
alter table "programs"."CarbonResults" drop constraint if exists "carbPE_FK";
alter table "programs"."CarbonResults" add constraint "carbPE_FK" foreign key("programEntryId") references "programs"."ProgramEntries"("programEntryId") on update NO ACTION on delete NO ACTION